name: Test

on:
  push:
    paths-ignore: ['*.yml', '*.md']
  pull_request:
    paths-ignore: ['*.yml', '*.md']

jobs:
  test:
    runs-on: windows-latest
    strategy:
      fail-fast: false
      matrix:
        Configuration: [Release 2013, Release, Debug 2013, Debug]
    steps:
    - run: |
        mkdir -vb "${{ matrix.Configuration }}"
        echo memes > "${{ matrix.Configuration }}\spt-memes.dll"
    - name: Get dll name
      run: |
        $spt_filename = "(gi ${{ matrix.Configuration }}\spt*.dll).BaseName"
        echo "::set-env name=spt_filename::$spt_filename"
    - name: Echo spt_extension
      run: echo "$env:spt_filename"
